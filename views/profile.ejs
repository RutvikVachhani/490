<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="css/profile.css" rel="stylesheet" type="text/css">
    <title>Planner</title>
    <header>
        <div class="headerMargin">
            <h1>CSUN</h1>
            <div class="left">
                <a href="/planner">Home</a>
                <a href="/profile">Profile</a>
                <a href="/logout">Logout</a>
            </div>
        </div>
    </header>
</head>

<body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous">
    </script>

    <div class="row">
        <div class="leftColumn">
            <img class="profilepicture" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" alt="profile pciture">
        </div>
    
        <div class="rightColumn">
            <div class="row">
                <div class="editInline">
                <h1>
                    Personal Information
                </h1>
                <p>(<a href="/editUser">Edit</a>)</p>
                </div>
                <% data.forEach(entry=> { %>
                    <h3>
                        Name: <%= entry.Name %>
                    </h3>
                    <h3>
                        Email: <%= entry.Email%>
                    </h3>
                    <h3>
                        DRP uploaded: <% if(entry.dprParsed == 0){%>
                            No
                        <% } else { %>
                            Yes
                        <% } %>
                    <% }) %>
                    </h3>
                <p>Update DPR - (Please Upload DPR)</p>
                <form action="/drpupload" method="POST" enctype="multipart/form-data">
                    <input type="file" name="file" id="file" hidden="hidden" />
                    <input type="submit" value="Upload" id="filesubmit" hidden="hidden" />
                    </form>
                    <div class="Upload">
                    <button type="button" id="custom-button">Upload</button>
                    <span id="custom-text">Choose a file</span>
                    <button type="button" id="custom-submit">submit</button>
                    </div>
                </body>
                <script type="text/javascript">
                    const realFilebutton = document.getElementById("file");
                    const customButton = document.getElementById("custom-button");
                    const realSubmitbutton = document.getElementById("filesubmit");
                    const customSubmitbutton = document.getElementById("custom-submit");
                    const customText = document.getElementById("custom-text");
                
                    customButton.addEventListener("click", function () {
                    realFilebutton.click();
                    });
                
                    customSubmitbutton.addEventListener("click", function () {
                    realSubmitbutton.click();
                    });
                
                    realFilebutton.addEventListener("change", function () {
                    if (realFilebutton.value) {
                        var val = realFilebutton.value;
                        var name = val.substr(val.lastIndexOf("\\") + 1);
                        customText.innerHTML = name;
                    } else {
                        customText.innerHTML = "No file chosen, yet.";
                    }
                    });
                </script>
                <script
                    src="https://code.jquery.com/jquery-2.2.1.min.js"
                    integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00="
                    crossorigin="anonymous">
                </script>              
            </div>
        </div>
    </div>
    
</body>

</html>